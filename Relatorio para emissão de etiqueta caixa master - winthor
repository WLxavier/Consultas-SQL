SELECT
    P.CODCLI,
    letras (NVL(P.NUMSEQROTA, 0)) letras,
    P.NUMPED,
    C.CLIENTE,
    A.PRACA,
    P.DATA,
    M.NUMOS,
    LPAD(TO_CHAR(i.numos), 10, '0') || LPAD(TO_CHAR(MAX(i.numvol)), 4, '0') AS BARRAS,
    I.NUMVOL,
    V.VOL AS MAX_VOL,
    M.NUMTRANSWMS,
    PT.CODPROD,
    PT.DESCRICAO,
    E.DEPOSITO,
    E.RUA,
    E.PREDIO,
    E.APTO,
    M.NUMLOTE,
    M.QT/M.NUMVIAS AS QT,
    E.TIPOENDER,
    M.NUMVIAS,
    MR.MARCA
FROM
    PCMOVENDPEND M
    JOIN PCPEDC P ON M.NUMPED = P.NUMPED
    JOIN PCCLIENT C ON C.CODCLI = P.CODCLI
    JOIN PCPRACA A ON P.CODPRACA = A.CODPRACA
    JOIN PCVOLUMEOS I ON I.NUMOS = M.NUMOS
    JOIN PCPRODUT PT ON PT.CODPROD = M.CODPROD
    JOIN PCENDERECO E ON E.CODENDERECO = M.CODENDERECO
    JOIN PCMARCA MR ON MR.CODMARCA = PT.CODMARCA
    LEFT JOIN (
        SELECT MAX(I.NUMVOL) AS VOL, M.NUMPED
        FROM PCMOVENDPEND M
        JOIN PCVOLUMEOS I ON M.NUMOS = I.NUMOS
        WHERE M.DTESTORNO IS NULL
        GROUP BY M.NUMPED
    ) V ON V.NUMPED = P.NUMPED
WHERE
    P.NUMPED = 192000760
    AND M.DTESTORNO IS NULL
    AND M.TIPOOS = 20
GROUP BY
    P.CODCLI,
    NVL(P.NUMSEQROTA, 0),
    P.NUMPED,
    C.CLIENTE,
    A.PRACA,
    P.DATA,
    M.NUMOS,
    I.NUMOS,
    V.VOL,
    I.NUMVOL,
    M.NUMTRANSWMS,
    PT.CODPROD,
    PT.DESCRICAO,
    E.DEPOSITO,
    E.RUA,
    E.PREDIO,
    E.APTO,
    M.NUMLOTE,
    M.QT,
    E.TIPOENDER,
    M.NUMVIAS,
    MR.MARCA
